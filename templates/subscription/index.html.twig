{% extends 'base.logged.html.twig' %}

{% block title %}Abonnements{% endblock %}

{% block body %}

<style>
    .centered-container {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 80vh; 
    }
    .card-shadow {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 6px 20px rgba(0, 0, 0, 0.1), 0 0 15px white; /* Effet de relief plus ombre */
        border-radius: 20px; 
        border: 7px solid #000; /* Taille de la bordure */
        width: 100%;
        max-width: 600px;
        padding: 20px;
    }
    .centered-title {
        margin-bottom: 20px; /* Ajustement de la marge pour une meilleure visibilité */
    }
    .card-title {
        margin-bottom: 10px; 
    }
</style>

<div class="container centered-container mb-4">
    <h1 class="text-center text-white centered-title">Notre Offre Premium</h1> 
    <div class="card card-shadow"> 
        <div class="card-body">
            <h5 class="card-title text-success fw-bold text-center ft_orbitron">Abonnement Premium</h5>
            <h6 class="card-subtitle mb-2 text-dark fw-bold text-center ft_audiowide">€19.99/mois</h6>
            <ul class="list-unstyled">
                <li class="ft_audiowide">Création de projets illimités</li>
                <li class="ft_audiowide">Outils illimités</li>
                <li class="ft_audiowide">Assistance par e-mail et téléphone</li>
                <li class="ft_audiowide">Accès au centre d'aide</li>
            </ul>
            <button id="subscribeButton" class="btn btn-success mt-3 fw-bold d-block mx-auto ft_fell">Souscrire</button>
        </div>
    </div>
</div>

{% endblock %}

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('subscribeButton').addEventListener('click', function () {
                fetch('{{ path("app_subscribe") }}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-Requested-With': 'XMLHttpRequest'
                    }
                })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        Swal.fire({
                            icon: 'success',
                            title: 'Félicitations !',
                            text: 'Vous avez bien souscrit à l\'offre premium.',
                            showConfirmButton: false,
                            timer: 2000
                        }).then(function() {
                            window.location.reload();
                        });
                    } else {
                        Swal.fire({
                            icon: 'info',
                            title: 'Déjà abonné',
                            text: 'Vous êtes déjà abonné à l\'offre premium.',
                        });
                    }
                });
            });
        });
    </script>
{% endblock %}
