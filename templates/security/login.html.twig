{# templates/profil/change_password.html.twig #}
{% extends 'base.logged.html.twig' %}

{% block title %}Changer le mot de passe{% endblock %}

{% block body %}

<style>
    .container {
        max-width: 800px;
    }

    .btn {
        padding: 5px 10px;
        font-size: 0.9rem;
    }

    h1, h4, h5, p {
        margin: 5px 0;
    }

    .card {
        padding: 10px;
    }

    .card-shadow {
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1), 0 6px 20px rgba(0, 0, 0, 0.1), 0 0 15px white;
        border-radius: 20px;
        border: 7px solid #000;
    }

    .form-control {
        background: transparent;
        border: 2px solid green;
        color: dark !important;
    }

    .form-group label {
        margin-bottom: 0.5rem;
        font-weight: bold;
    }

    .form-group .form-control {
        margin-bottom: 1rem;
    }
</style>

<div class="container mt-5 mb-3" data-controller="sweetalert">
    <div class="row justify-content-center">
        <div class="col-lg-6">
            <form method="post" class="form-change-password p-5 card-shadow bg-light" data-controller="sweetalert" data-sweetalert-target="form">
                {% if error %}
                    <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                {% endif %}

                {% if app.user %}
                    <div class="mb-3 text-center text-warning">
                        Vous êtes connecté en tant que {{ app.user.userIdentifier }}, <a class="text-success" href="{{ path('app_logout') }}">Se déconnecter</a><br>
                        Par soucis de sécurité nous vous demandons de resaisir votre mot de passe.
                    </div>
                {% endif %}

                <h1 class="h1 mb-3 font-weight-normal text-center text-dark ft_orbitron">Modifier le mot de passe</h1>

                <div class="form-group">
                    {{ form_start(changePasswordForm, {'attr': {'class': 'form'}}) }}
                    {{ form_widget(changePasswordForm) }}
                    <button type="submit" class="btn btn-lg btn-success btn-block ft_wallpoet fw-bold"
                    style="display: block; margin: 20px auto; width: 80%; max-width: 300px; padding: 10px 0; font-size: 16px;">Changer le mot de passe</button>
                    {{ form_end(changePasswordForm) }}
                </div>
            </form>
        </div>
    </div>

    {% for label, messages in app.flashes %}
    {% for message in messages %}
    <div class="flash-message" data-label="{{ label }}" data-message="{{ message }}"></div>
    {% endfor %}
    {% endfor %}
</div>
{% endblock %}
